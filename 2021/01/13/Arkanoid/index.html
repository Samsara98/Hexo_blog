<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Arkanoid | SamsarA</title><script src="https://cdn.bootcss.com/valine/1.4.4/Valine.min.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/mermaid/8.8.2/mermaid.min.js"></script><script>mermaid.initialize({
  startOnLoad: true
  , theme: 'dark'
});</script><link rel="stylesheet" href="/samsara/css/arknights.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.2/styles/atom-one-dark-reasonable.min.css"><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/samsara/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/samsara/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/samsara/atom.xml" title="SamsarA" type="application/atom+xml">
</head><body><header><nav><a href="/samsara/">Home</a><a href="/samsara/archives/">Archives</a></nav></header><main><article><div id="post-bg"><div id="post-title"><h1>Arkanoid</h1><hr></div><div id="post-content"><p>Welcome to <a href="https://samsara98.gitee.io/samsara/">SamsarA’s Blog</a>! If you get any problems when reading my blog, you can ask me on <a target="_blank" rel="noopener" href="https://gitee.com/samsara98/samsara">Gitee</a>.</p>
<h1 id="Arkanoid"><a href="#Arkanoid" class="headerlink" title="Arkanoid"></a>Arkanoid</h1><pre><code>#GUI #动画 #回调  #事件监听</code></pre>
<p>&nbsp;  You can get source code on my <a target="_blank" rel="noopener" href="https://gitee.com/samsara98/arkanoid">Gitee</a>.</p>
<p><em>超越Woz的打砖块</em></p>
<ul>
<li><p>小球碰到挡板反弹</p>
</li>
<li><p>玩家拥有3条命 </p>
</li>
<li><p>有积分系统，小球速度越快得分越高</p>
</li>
<li><p>打碎砖块有概率分裂出2个小球帮助打破砖块</p>
</li>
<li><p>砖块打破概率掉下来胶囊，拾取之后挡板变长 </p>
</li>
<li><p>砖块之后隐藏照片，不同关卡有不同图片，存在隐藏结局图片</p>
</li>
<li><p>理论上存在无限的关卡，速度随着关卡数提升</p>
</li>
</ul>
<h2 id="运行逻辑"><a href="#运行逻辑" class="headerlink" title="运行逻辑"></a>运行逻辑</h2><h3 id="Program程序先执行init（）初始化："><a href="#Program程序先执行init（）初始化：" class="headerlink" title="Program程序先执行init（）初始化："></a>Program程序先执行init（）初始化：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">public void <span class="hljs-function"><span class="hljs-title">init</span></span>()  &#123;<br>  addBgImge();  // 在屏幕上显示背景图片<br>  initGameData();  // 初始化游戏数据<br>  showGameInfo(); // 在屏幕上添加游戏信息<br>  makeBall();   // 往屏幕上添加小球<br>  makeBricks(); // 往屏幕上添加砖块<br>  makePaddle();  //往屏幕上添加挡板<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="然后执行run（）："><a href="#然后执行run（）：" class="headerlink" title="然后执行run（）："></a>然后执行run（）：</h3><p><em>每一个间隔内对小球状态进行监听，小球进行移动，若发送碰撞等事件执行相应命令；</em><br><em>对游戏状态进行监听：游戏结束/游戏胜利/进入下一关；</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs bash">public void <span class="hljs-function"><span class="hljs-title">run</span></span>() &#123;<br>    //启动鼠标<br>    addMouseListeners();<br>    // 初始化显示文字<br>    label.setLabel(<span class="hljs-string">&quot;&quot;</span>);<br>    //noinspection Infinite Loop Statement<br>    <span class="hljs-keyword">while</span> (Live &gt; 0) &#123;<br>        waitForClick();<br>        <span class="hljs-keyword">while</span> (label.getLabel().equals(<span class="hljs-string">&quot;&quot;</span>)) &#123; //label出现提示时停止循环，下一条命<br>            // 检查是否撞墙<br>            checkCollision();<br>            //检查是否撞到砖块<br>            checkBrickCollision();<br>            // 检测是否存在奖励方块，存在则要进行监听，检查是否碰到挡板<br>            checkRewardCollision();<br>            // 检测是否存在分裂球，存在则要进行监听，检查是否碰到墙壁和砖块<br>            checkRewardBallCollosion();<br>            // 移动小球的位置<br>            ball.move(vx, vy);<br>            // 延迟<br>            pause(DELAY);<br>        &#125;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;GG&quot;</span>.equals(label.getLabel() )) &#123;  //小球落地时触发<br>            lostHP();<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;You Win The Game!&quot;</span>.equals(label.getLabel())) &#123;   //挡板长于游戏界面时触发<br>            WinTheGame();<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;  NEXT STAGE~&quot;</span>.equals(label.getLabel()))&#123;   //清除所有砖块进入下一关时触发<br>            waitForClick();<br>            initAndRestart();   //初始化<br>        &#125;<br>    &#125;  //3命用尽时触发<br>    waitForClick();<br>    StageNum = 1;<br>    Score = 0;<br>    initAndRestart();<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="监听方法"><a href="#监听方法" class="headerlink" title="监听方法"></a>监听方法</h3><p><em>对运动物体进行检测并对碰撞做出反应:</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br>void checkCollision（）&#123;  //监听小球碰墙情况<br>  ...<br>&#125;<br><br><br>void checkBrickCollision（）&#123;  //监听小球碰砖块情况<br>  ...<br>&#125;<br><br>void checkReward（）&#123;  //监听奖励胶囊碰挡板情况<br>  ...<br>&#125;<br><br>void checkRewardBall（）&#123;     //监听分裂球碰砖块情况<br>  ...<br>&#125;<br><br>void checkRewardBall2（）&#123;    //监听分裂球碰墙情况<br>  ...<br>&#125;<br><br></code></pre></td></tr></table></figure>
<h3 id="碰撞检测"><a href="#碰撞检测" class="headerlink" title="碰撞检测"></a>碰撞检测</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br>GObject <span class="hljs-function"><span class="hljs-title">getCollidingObject</span></span>() &#123; //判断小球四角，返回检测点碰撞的对象<br>...<br>&#125;<br><br></code></pre></td></tr></table></figure>
<hr>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br>/**<br>* Method: Hit Bottom Wall.<br>* -----------------------<br>* 判断小球是否击中了底部边界<br>  */<br>  boolean hitBottomWall(GObject g) &#123;<br>  <span class="hljs-built_in">return</span> g.getY() &gt;= getHeight() - g.getHeight() * 0.8;<br>  &#125;<br></code></pre></td></tr></table></figure>
<hr>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br>/**<br>* Method: Hit Top Wall<br>* -----------------------<br>* 判断小球是否击中了顶部边界<br>  */<br>  boolean hitTopWall(GObject g) &#123;<br>  <span class="hljs-built_in">return</span> g.getY() &lt;= 0;<br>  &#125;<br><br></code></pre></td></tr></table></figure>
<hr>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br>/**<br>* Method: Hit Right Wall<br>* -----------------------<br>* 判断小球是否击中了右侧边界<br>  */<br>  boolean hitRightWall(GObject g) &#123;<br>  <span class="hljs-built_in">return</span> g.getX() &gt;= getWidth() - g.getWidth();<br>  &#125;<br>  <br></code></pre></td></tr></table></figure>
<hr>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br>/**<br>* Method: Hit Left Wall<br>* -----------------------<br>* 判断小球是否击中了左侧边界<br>  */<br>  boolean hitLeftWall(GObject g) &#123;<br>  <span class="hljs-built_in">return</span> g.getX() &lt;= 0;<br>  &#125;<br><br></code></pre></td></tr></table></figure>
<h3 id="对象生成"><a href="#对象生成" class="headerlink" title="对象生成"></a>对象生成</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br><br>public void <span class="hljs-function"><span class="hljs-title">makeBall</span></span>() &#123;  //生成唯一小球<br>...<br>&#125;<br>  <br>  <br>public void <span class="hljs-function"><span class="hljs-title">makeRewardBall</span></span>() &#123;  //生成分裂球<br>...<br>&#125;<br><br>  <br>public void <span class="hljs-function"><span class="hljs-title">makeBricks</span></span>() &#123;      //生成砖块组<br>...<br>&#125;<br><br>  <br>public void <span class="hljs-function"><span class="hljs-title">makePaddle</span></span>() &#123;       //生成挡板<br>...<br>&#125;<br>  <br>public void <span class="hljs-function"><span class="hljs-title">makeReward</span></span>() &#123;      //生存奖励胶囊<br>...<br>&#125;<br><br></code></pre></td></tr></table></figure>
<h3 id="对象跟踪"><a href="#对象跟踪" class="headerlink" title="对象跟踪"></a>对象跟踪</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br>public void mouseMoved(MouseEvent e) &#123;  //挡板跟随鼠标移动<br>  paddle.setLocation(e.getX() - 0.5 * PADDLE_WIDTH, APPLICATION_HEIGHT - 50);<br>&#125;<br><br></code></pre></td></tr></table></figure><div id="paginator"></div></div><div id="post-footer"><hr><a href="/samsara/2021/01/19/PS/">← Prev PS</a><span style="color: #fe2"> | </span><a href="/samsara/2021/01/07/C@sio_Calculator/">C@SIO_Calculator Next →</a><hr></div><div id="bottom-btn"><a id="to-index" href="#post-index" title="index">≡</a><a id="to-top" href="#post-title" title="to top">∧</a></div><div id="Valine"></div><script>new Valine({
 el: '#Valine'
 , appId: ''
 , appKey: ''
 , placeholder: '此条评论委托企鹅物流发送'
})</script></div></article><aside><div id="about"><a href="/samsara/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a href="/"> Dr.SamsarA</a></h1><section id="total"><a id="total-archives" href="/samsara/archives"><span class="total-title">Archives Total:</span><span class="total-number">15</span></a><div id="total-tags"><span class="total-title">Tags:</span><span class="total-number">5</span></div><div id="total-categories"><span class="total-title">Categories:</span><span class="total-number">1</span></div></section></div><div id="aside-block" style="order: 0"><h1>INDEX</h1><div id="post-index"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Arkanoid"><span class="toc-number">1.</span> <span class="toc-text">Arkanoid</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E9%80%BB%E8%BE%91"><span class="toc-number">1.1.</span> <span class="toc-text">运行逻辑</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Program%E7%A8%8B%E5%BA%8F%E5%85%88%E6%89%A7%E8%A1%8Cinit%EF%BC%88%EF%BC%89%E5%88%9D%E5%A7%8B%E5%8C%96%EF%BC%9A"><span class="toc-number">1.1.1.</span> <span class="toc-text">Program程序先执行init（）初始化：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%84%B6%E5%90%8E%E6%89%A7%E8%A1%8Crun%EF%BC%88%EF%BC%89%EF%BC%9A"><span class="toc-number">1.1.2.</span> <span class="toc-text">然后执行run（）：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%91%E5%90%AC%E6%96%B9%E6%B3%95"><span class="toc-number">1.1.3.</span> <span class="toc-text">监听方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B"><span class="toc-number">1.1.4.</span> <span class="toc-text">碰撞检测</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E7%94%9F%E6%88%90"><span class="toc-number">1.1.5.</span> <span class="toc-text">对象生成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E8%B7%9F%E8%B8%AA"><span class="toc-number">1.1.6.</span> <span class="toc-text">对象跟踪</span></a></li></ol></li></ol></li></ol></div></div><footer><nobr><span class="text-title">©</span><span class="text-content">1998 to 2021</span></nobr><wbr><nobr><span class="text-title">ICP</span><span class="text-content">——SAS——</span></nobr><wbr><wbr><nobr>published with&nbsp;<a target="_blank" rel="noopener" href="http://hexo.io">Hexo&nbsp;</a></nobr><wbr><nobr>Theme&nbsp;<a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknight&nbsp;</a></nobr><wbr><nobr>by&nbsp;<a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas><script src="/samsara/js/arknights.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script></body></html>